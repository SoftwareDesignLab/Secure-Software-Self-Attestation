<!-- TODO split processing vertically into upload and download sections -->
<app-catalog-processing (fileSelected)="onFileSelected($event)"></app-catalog-processing> 
<div *ngFor="let catalog of catalogData.catalogs"> 
  <div class="catalog-container">
    <div class="button-panel">
      <p *ngIf="isShown(catalog.uuid)" class="button-caption">Collapse Catalog</p>
      <p *ngIf="!isShown(catalog.uuid)" class="button-caption">Expand Catalog</p>
      <div (click)="toggleExpansion(catalog.uuid)" 
           [className]="isShown(catalog.uuid) ? 'circle-button orange' : 'circle-button green'">     
      </div><br>
      <p class="button-caption" *ngIf="isRemovable(catalog.uuid)">Remove Catalog</p>
      <div (click)="removeCatalog(catalog.uuid)" class="circle-button red" *ngIf="isRemovable(catalog.uuid)"></div>
    </div>
    <app-catalog-info [uuid]="catalog.uuid" [metadata]="catalog.metadata" *ngIf="catalog"></app-catalog-info>
    <div id="grid-container" [className]="isShown(catalog.uuid) ? 'grid-container' : 'grid-container hidden'" *ngIf="catalog">
      <div id="group-container" class="group-container">
        <button (click)="setAllGroupExpansion(false, catalog.uuid)">Collapse All</button>
        <button (click)="setAllGroupExpansion(true, catalog.uuid)">Expand All</button>
        <!-- TODO make groups a list of objects so that descriptions can be fetched with a function-->
        <app-group *ngFor="let group of catalog.groups" 
          [id]="group.id" 
          [title]="group.title" 
          [controls]="group.controls"
          [catalogUUID]="catalog.uuid"
        ></app-group>
      <div *ngIf="catalog.controls">
        <app-group
          [title]="control"
          [controls]="catalog.controls"
          [catalogUUID]="catalog.uuid"
        ></app-group>
        </div>
      </div>
    </div>
  </div>
</div>